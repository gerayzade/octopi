# Migration `20200418184758-init`

This migration has been generated by Heydar Gerayzade at 4/18/2020, 6:47:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."User" (
    "createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    "email" TEXT NOT NULL  ,
    "hash" TEXT NOT NULL  ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT   ,
    "role" TEXT NOT NULL DEFAULT 'USER' ,
    "salt" TEXT NOT NULL  
) 

CREATE TABLE "quaint"."Activity" (
    "daysOfWeek" TEXT NOT NULL DEFAULT '[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"0\"]' ,
    "endTime" TEXT NOT NULL  ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "startTime" TEXT NOT NULL  ,
    "title" TEXT NOT NULL  ,
    "weight" INTEGER NOT NULL DEFAULT 0 
) 

CREATE TABLE "quaint"."UserActivity" (
    "activityId" INTEGER NOT NULL  ,
    "daysOfWeek" TEXT NOT NULL DEFAULT '[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"0\"]' ,
    "endTime" TEXT NOT NULL  ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "startTime" TEXT NOT NULL  ,
    "userId" INTEGER NOT NULL  ,
    "weight" INTEGER NOT NULL DEFAULT 0 ,FOREIGN KEY ("activityId") REFERENCES "Activity"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200418184758-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,45 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "sqlite"
+  url      = env("DATABASE_URL")
+}
+
+enum Role {
+  USER
+  ADMIN
+}
+
+model User {
+  id              Int               @default(autoincrement()) @id
+  createdAt       DateTime          @default(now())
+  email           String            @unique
+  hash            String
+  salt            String
+  name            String?
+  role            Role              @default(USER)
+  activities      UserActivity[]
+}
+
+model Activity {
+  id              Int               @id  @default(autoincrement())
+  title           String
+  startTime       String          
+  endTime         String     
+  daysOfWeek      String            @default("[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"0\"]")   
+  weight          Int               @default(0)  
+}
+
+model UserActivity {
+  id              Int               @id @default(autoincrement())
+  startTime       String
+  endTime         String
+  daysOfWeek      String            @default("[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"0\"]")
+  weight          Int               @default(0)  
+  activity        Activity          @relation(fields: [activityId], references: [id])
+  activityId      Int
+  user            User              @relation(fields: [userId], references: [id])
+  userId          Int
+}
```


